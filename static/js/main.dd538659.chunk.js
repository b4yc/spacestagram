(this.webpackJsonpspacestagram=this.webpackJsonpspacestagram||[]).push([[0],{126:function(e,t,a){e.exports=a.p+"static/media/empty.2366730f.png"},127:function(e,t,a){e.exports=a.p+"static/media/failed.54d42a45.png"},128:function(e,t,a){e.exports=a.p+"static/media/logo.394bdb03.svg"},134:function(e,t,a){e.exports=a(247)},139:function(e,t,a){},140:function(e,t,a){},247:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(28),l=a.n(i),o=(a(139),a(257)),c=a(256),s=a(259),d=(a(140),a(263)),u=a(130),m=a(56),p=function(){return Object(m.b)()},g=m.c,f=a(260),b=a(131),E=a(24),v=a(16),h=a(261),y=a(94),k=a(262),w=a(251),x=a(252),O=a(253),P=a(254),j=a(42);const D={data:JSON.parse(localStorage.getItem("likedPosts")||"[]")||[]},S=e=>{let{getState:t}=e;return e=>a=>{const n=e(a);return(L.match(a)||I.match(a))&&localStorage.setItem("likedPosts",JSON.stringify([...t().likedPosts.data])),n}},C=Object(j.c)({name:"likedPosts",initialState:D,reducers:{addLikedPost:(e,t)=>{e.data=function(e,t){var a;return(null===(a=e.data)||void 0===a?void 0:a.some(e=>e.url===t.url))?[...e.data]:[...e.data,t]}(e,t.payload)},removeLikedPost:(e,t)=>{e.data=function(e,t){return e.data.filter(e=>e.url!==t.url)}(e,t.payload)}}}),{addLikedPost:L,removeLikedPost:I}=C.actions,T=e=>e.likedPosts.data;var F=C.reducer;function A(e){let{image:t}=e;const a=p(),i=g(T),[l,o]=Object(n.useState)(!1),[c,s]=Object(n.useState)(!1),[d,u]=Object(n.useState)(!1),[m,j]=Object(n.useState)(""),[D,S]=Object(n.useState)("");Object(n.useEffect)(()=>{const e=new Date(t.date);S("".concat(e.toLocaleString("default",{month:"short"})," \n      ").concat(e.getUTCDate(),",\n      ").concat(e.getUTCFullYear()))},[t.date]),Object(n.useEffect)(()=>{s(!!i.some(e=>e.url===t.url))},[i]);const C=Object(n.useCallback)(()=>u(e=>!e),[]),F=Object(n.useCallback)(()=>o(e=>!e),[]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{sectioned:!0},r.a.createElement("img",{alt:"APOD image of "+t.date,width:"100%",height:"100%",style:{objectFit:"cover",objectPosition:"center"},src:t.url}),r.a.createElement("div",{style:{padding:"1rem 0",display:"flex",flexDirection:"row",justifyContent:"space-between"}},r.a.createElement("div",null,r.a.createElement(b.a,null,t.title),r.a.createElement("p",null,D)),r.a.createElement(E.a,{segmented:!0},r.a.createElement(v.a,{onClick:()=>{j("URL Copied to Clipboard"),u(!0),navigator.clipboard.writeText(t.url)},accessibilityLabel:"Copy url to clipboard",icon:w.a,"data-testid":"share-button"}),r.a.createElement(v.a,{onClick:function(){c?(j("Removed from Favourites"),a(I(t))):(j("Added to Favourites"),a(L(t))),u(!0)},accessibilityLabel:c?"Unlike post":"Like post",pressed:c,icon:x.a,"data-testid":"like-button"}))),r.a.createElement(h.a,{open:l,id:"collapsible-description",transition:{duration:"500ms",timingFunction:"ease-in-out"},expandOnPrint:!0},r.a.createElement(y.a,null,r.a.createElement("p",null,t.description))),r.a.createElement(v.a,{onClick:F,accessibilityLabel:l?"Collapse description":"Expand description",ariaExpanded:l,ariaControls:"collapsible-description",icon:l?O.a:P.a,plain:!0,fullWidth:!0})),d?r.a.createElement(k.a,{content:m,onDismiss:C}):null)}var R=a(5),W=a(93),Y=a.n(W),_=a(124),J=a(125),N=a.n(J);function U(e){var t=new Date;return t.setDate(t.getDate()-15*e-15+1),t.toISOString().split("T")[0]}function z(e){var t=new Date;return t.setDate(t.getDate()-15*e),t.toISOString().split("T")[0]}function B(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return N.a.get("https://api.nasa.gov/planetary/apod",{params:{api_key:"2EYIAQOZDLdoTYuqe2aEmBb6OVZ5Pp2IZKvdbPeS",thumbs:!0,start_date:U(e),end_date:z(e)}})}var Z=Object(j.b)("images/fetchImages",function(){var e=Object(_.a)(Y.a.mark((function e(t){var a;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B(t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),q=Object(j.c)({name:"images",initialState:{data:{activePage:0,pagesData:[]},status:"idle"},reducers:{addPageData:function(e,t){e.data.pagesData=function(e,t){return e.data.pagesData?e.data.pagesData.some((function(e){return e.number===t.number}))?Object(R.a)(e.data.pagesData):[].concat(Object(R.a)(e.data.pagesData),[t]):[t]}(e,t.payload)},setActivePage:function(e,t){e.data.activePage=t.payload}},extraReducers:function(e){e.addCase(Z.pending,(function(e){e.status="loading"})).addCase(Z.rejected,(function(e){e.status="failed"})).addCase(Z.fulfilled,(function(e){e.status="idle"}))}}),H=q.actions,K=H.addPageData,M=H.setActivePage,Q=function(e){return e.images.data.pagesData},V=function(e){return e.images.data.activePage},$=function(e){return e.images.status};var G=q.reducer,X=a(126),ee=a.n(X),te=a(127),ae=a.n(te);function ne(e){var t,a;let{selectedTabId:i}=e;const l=p(),o=g(Q),c=g(V),s=g(V),m=g(T),f=g($);return Object(n.useEffect)(()=>{o.some(e=>e.number===c)||"failed"===f||l(Z(c)).unwrap().then(e=>{l(K({number:c,images:e.data.map(e=>({title:e.title,date:e.date,description:e.explanation,url:"video"===e.media_type?e.thumbnail_url:e.url}))}))}).catch(e=>{console.log("Error occurred",e)})}),r.a.createElement(r.a.Fragment,null,"explore"===i?"failed"===f?r.a.createElement("div",{"data-testid":"error-state-page"},r.a.createElement(d.a,{heading:"Something got lost in space...",image:ae.a},r.a.createElement("p",null,"Please try again later."))):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{display:"flex",flexDirection:"column-reverse"},"data-testid":"apod-images"},null===(t=o.find(e=>e.number===c))||void 0===t||null===(a=t.images)||void 0===a?void 0:a.map(e=>r.a.createElement(A,{image:e,key:e.url}))),r.a.createElement("div",{style:{display:"flex",justifyContent:"center",padding:"2rem"}},r.a.createElement(u.a,{hasPrevious:s>0,onPrevious:()=>{l(M(s-1)),window.scrollTo({top:0,behavior:"smooth"})},hasNext:!0,onNext:()=>{l(M(s+1)),window.scrollTo({top:0,behavior:"smooth"})}}))):0===m.length?r.a.createElement("div",{"data-testid":"empty-state-page"},r.a.createElement(d.a,{heading:"There's nothing to see here",image:ee.a},r.a.createElement("p",null,"Head over to the ",r.a.createElement("em",null,"Explore Recent")," tab to start your collection!"))):r.a.createElement("div",{style:{display:"flex",flexDirection:"column-reverse"},"data-testid":"liked-images"},m.map(e=>r.a.createElement(A,{image:e,key:e.url}))))}var re=a(264),ie=a(265),le=a(132),oe=a(95);function ce(){return r.a.createElement(re.a,{title:"",narrowWidth:!0},r.a.createElement("hr",null),r.a.createElement(s.a,{tabs:ue,selected:0,fitted:!0}),Array(15).fill(0).map((function(e,t){return r.a.createElement(f.a,{key:t},r.a.createElement(f.a.Section,null,r.a.createElement(ie.a,{size:"large"}),r.a.createElement(y.a,null,r.a.createElement("br",null),r.a.createElement(le.a,{size:"small"}),r.a.createElement(oe.a,{lines:2}))))})))}var se=a(128),de=a.n(se);const ue=[{id:"explore",content:"Explore Recent",accessibilityLabel:"Explore Recent Page",panelID:"explore-page-content"},{id:"liked",content:"Your Favourites",accessibilityLabel:"Your Favourites Page",panelID:"liked-page-content"}];var me=function(){const e=g($),[t,a]=Object(n.useState)(0),i=Object(n.useCallback)(e=>a(e),[]);return"loading"===e?r.a.createElement(ce,null):r.a.createElement(o.a,{title:"",narrowWidth:!0},r.a.createElement("img",{src:de.a,alt:"spacestagram logo",style:{width:"200px",padding:"1rem",cursor:"pointer"},onClick:()=>{window.location.reload()},"data-testid":"logo"}),r.a.createElement("hr",null),r.a.createElement(c.a,null,r.a.createElement(s.a,{tabs:ue,selected:t,onSelect:i,fitted:!0}),r.a.createElement(ne,{selectedTabId:ue[t].id})))},pe=Object(j.a)({reducer:{images:G,likedPosts:F},middleware:function(e){return e({serializableCheck:!1}).concat(S)}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ge=a(258),fe=a(129);a(245);l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(m.a,{store:pe},r.a.createElement(ge.a,{i18n:fe},r.a.createElement(me,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[134,1,2]]]);
//# sourceMappingURL=main.dd538659.chunk.js.map