(this.webpackJsonpspacestagram=this.webpackJsonpspacestagram||[]).push([[0],{126:function(e,t,a){e.exports=a.p+"static/media/empty.2366730f.png"},127:function(e,t,a){e.exports=a.p+"static/media/failed.54d42a45.png"},128:function(e,t,a){e.exports=a.p+"static/media/logo.394bdb03.svg"},134:function(e,t,a){e.exports=a(247)},139:function(e,t,a){},140:function(e,t,a){},247:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(28),c=a.n(i),l=(a(139),a(257)),o=a(256),s=a(259),u=(a(140),a(263)),d=a(130),m=a(56),p=function(){return Object(m.b)()},f=m.c,g=a(2),b=a(260),E=a(131),v=a(24),h=a(16),O=a(261),y=a(94),j=a(262),k=a(251),w=a(252),x=a(253),P=a(254),D=a(3),S=a(42),C={data:JSON.parse(localStorage.getItem("likedPosts")||"[]")||[]},I=function(e){var t=e.getState;return function(e){return function(a){var n=e(a);return(F.match(a)||A.match(a))&&localStorage.setItem("likedPosts",JSON.stringify(Object(D.a)(t().likedPosts.data))),n}}},L=Object(S.c)({name:"likedPosts",initialState:C,reducers:{addLikedPost:function(e,t){e.data=function(e,t){return e.data.some((function(e){return e.url===t.url}))?Object(D.a)(e.data):[].concat(Object(D.a)(e.data),[t])}(e,t.payload)},removeLikedPost:function(e,t){e.data=function(e,t){return e.data.filter((function(e){return e.url!==t.url}))}(e,t.payload)}}}),T=L.actions,F=T.addLikedPost,A=T.removeLikedPost,R=function(e){return e.likedPosts.data};var W=L.reducer;function _(e){var t=e.image,a=p(),i=f(R),c=Object(n.useState)(!1),l=Object(g.a)(c,2),o=l[0],s=l[1],u=Object(n.useState)(!1),d=Object(g.a)(u,2),m=d[0],D=d[1],S=Object(n.useState)(!1),C=Object(g.a)(S,2),I=C[0],L=C[1],T=Object(n.useState)(""),W=Object(g.a)(T,2),_=W[0],J=W[1],N=Object(n.useState)(""),z=Object(g.a)(N,2),B=z[0],Y=z[1];Object(n.useEffect)((function(){var e=new Date(t.date);Y(e.toDateString().split(" ").slice(1).join(" "))}),[t.date]),Object(n.useEffect)((function(){D(!!i.some((function(e){return e.url===t.url})))}),[i]);var Z=Object(n.useCallback)((function(){return L((function(e){return!e}))}),[]),U=Object(n.useCallback)((function(){return s((function(e){return!e}))}),[]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a,{sectioned:!0},r.a.createElement("img",{alt:"APOD image of "+t.date,width:"100%",height:"100%",style:{objectFit:"cover",objectPosition:"center"},src:t.url}),r.a.createElement("div",{style:{padding:"1rem 0",display:"flex",flexDirection:"row",justifyContent:"space-between"}},r.a.createElement("div",null,r.a.createElement(E.a,null,t.title),r.a.createElement("p",null,B)),r.a.createElement(v.a,{segmented:!0},r.a.createElement(h.a,{onClick:function(){J("URL Copied to Clipboard"),L(!0),navigator.clipboard.writeText(t.url)},accessibilityLabel:"Copy url to clipboard",icon:k.a}),r.a.createElement(h.a,{onClick:function(){m?(J("Removed from Favourites"),a(A(t))):(J("Added to Favourites"),a(F(t))),L(!0)},accessibilityLabel:m?"Unlike post":"Like post",pressed:m,icon:w.a}))),r.a.createElement(O.a,{open:o,id:"collapsible-description",transition:{duration:"500ms",timingFunction:"ease-in-out"},expandOnPrint:!0},r.a.createElement(y.a,null,r.a.createElement("p",null,t.description))),r.a.createElement(h.a,{onClick:U,accessibilityLabel:o?"Collapse description":"Expand description",ariaExpanded:o,ariaControls:"collapsible-description",icon:o?x.a:P.a,plain:!0,fullWidth:!0})),I?r.a.createElement(j.a,{content:_,onDismiss:Z}):null)}var J=a(93),N=a.n(J),z=a(124),B=a(125),Y=a.n(B);function Z(e){var t=new Date;return t.setDate(t.getDate()-15*e-15+1),t.toISOString().split("T")[0]}function U(e){var t=new Date;return t.setDate(t.getDate()-15*e),t.toISOString().split("T")[0]}function q(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return Y.a.get("https://api.nasa.gov/planetary/apod",{params:{api_key:"2EYIAQOZDLdoTYuqe2aEmBb6OVZ5Pp2IZKvdbPeS",thumbs:!0,start_date:Z(e),end_date:U(e)}})}var H=Object(S.b)("images/fetchImages",function(){var e=Object(z.a)(N.a.mark((function e(t){var a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q(t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),K=Object(S.c)({name:"images",initialState:{data:{activePage:0,pagesData:[]},status:"idle"},reducers:{addPageData:function(e,t){e.data.pagesData=function(e,t){return e.data.pagesData?e.data.pagesData.some((function(e){return e.number===t.number}))?Object(D.a)(e.data.pagesData):[].concat(Object(D.a)(e.data.pagesData),[t]):[t]}(e,t.payload)},setActivePage:function(e,t){e.data.activePage=t.payload}},extraReducers:function(e){e.addCase(H.pending,(function(e){e.status="loading"})).addCase(H.rejected,(function(e){e.status="failed"})).addCase(H.fulfilled,(function(e){e.status="idle"}))}}),M=K.actions,Q=M.addPageData,V=M.setActivePage,$=function(e){return e.images.data.pagesData},G=function(e){return e.images.data.activePage},X=function(e){return e.images.status};var ee=K.reducer,te=a(126),ae=a.n(te),ne=a(127),re=a.n(ne);function ie(e){var t,a;let{selectedTabId:i}=e;const c=p(),l=f($),o=f(G),s=f(G),m=f(R),g=f(X);return Object(n.useEffect)(()=>{l.some(e=>e.number===o)||"failed"===g||c(H(o)).unwrap().then(e=>{c(Q({number:o,images:e.data.map(e=>({title:e.title,date:e.date,description:e.explanation,url:"video"===e.media_type?e.thumbnail_url:e.url}))}))}).catch(e=>{console.log("Error occurred",e)})}),r.a.createElement(r.a.Fragment,null,"explore"===i?"failed"===g?r.a.createElement("div",{"data-testid":"error-state-page"},r.a.createElement(u.a,{heading:"Something got lost in space...",image:re.a},r.a.createElement("p",null,"Please try again later."))):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{display:"flex",flexDirection:"column-reverse"}},null===(t=l.find(e=>e.number===o))||void 0===t||null===(a=t.images)||void 0===a?void 0:a.map(e=>r.a.createElement(_,{image:e,key:e.url}))),r.a.createElement("div",{style:{display:"flex",justifyContent:"center",padding:"2rem"}},r.a.createElement(d.a,{hasPrevious:s>0,onPrevious:()=>{c(V(s-1)),window.scrollTo({top:0,behavior:"smooth"})},hasNext:!0,onNext:()=>{c(V(s+1)),window.scrollTo({top:0,behavior:"smooth"})}}))):0===m.length?r.a.createElement(u.a,{heading:"There's nothing to see here",image:ae.a},r.a.createElement("p",null,"Head over to the ",r.a.createElement("em",null,"Explore Recent")," tab to start your collection!")):r.a.createElement("div",{style:{display:"flex",flexDirection:"column-reverse"}},m.map(e=>r.a.createElement(_,{image:e,key:e.url}))))}var ce=a(264),le=a(265),oe=a(132),se=a(95);function ue(){return r.a.createElement(ce.a,{title:"",narrowWidth:!0},r.a.createElement("hr",null),r.a.createElement(s.a,{tabs:pe,selected:0,fitted:!0}),Array(15).fill(0).map((function(e,t){return r.a.createElement(b.a,{key:t},r.a.createElement(b.a.Section,null,r.a.createElement(le.a,{size:"large"}),r.a.createElement(y.a,null,r.a.createElement("br",null),r.a.createElement(oe.a,{size:"small"}),r.a.createElement(se.a,{lines:2}))))})))}var de=a(128),me=a.n(de);const pe=[{id:"explore",content:"Explore Recent",accessibilityLabel:"Explore Page",panelID:"explore-page-content"},{id:"liked",content:"Your Favourites",panelID:"liked-page-content"}];var fe=function(){const e=f(X),[t,a]=Object(n.useState)(0),i=Object(n.useCallback)(e=>a(e),[]);return"loading"===e?r.a.createElement(ue,null):r.a.createElement(l.a,{title:"",narrowWidth:!0},r.a.createElement("img",{src:me.a,alt:"spacestagram logo",style:{width:"200px",padding:"1rem  0",cursor:"pointer"},onClick:()=>{window.location.reload()},"data-testid":"logo"}),r.a.createElement("hr",null),r.a.createElement(o.a,null,r.a.createElement(s.a,{tabs:pe,selected:t,onSelect:i,fitted:!0}),r.a.createElement(ie,{selectedTabId:pe[t].id})))},ge=Object(S.a)({reducer:{images:ee,likedPosts:W},middleware:function(e){return e({serializableCheck:!1}).concat(I)}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var be=a(258),Ee=a(129);a(245);c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(m.a,{store:ge},r.a.createElement(be.a,{i18n:Ee},r.a.createElement(fe,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[134,1,2]]]);
//# sourceMappingURL=main.ff02b3ab.chunk.js.map