(this.webpackJsonpspacestagram=this.webpackJsonpspacestagram||[]).push([[0],{126:function(e,t,a){e.exports=a.p+"static/media/empty.2366730f.png"},127:function(e,t,a){e.exports=a.p+"static/media/failed.54d42a45.png"},128:function(e,t,a){e.exports=a.p+"static/media/logo.394bdb03.svg"},134:function(e,t,a){e.exports=a(247)},139:function(e,t,a){},140:function(e,t,a){},247:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(28),l=a.n(i),c=(a(139),a(257)),o=a(256),s=a(259),u=(a(140),a(263)),d=a(130),m=a(56),p=function(){return Object(m.b)()},g=m.c,f=a(260),b=a(131),E=a(24),v=a(16),h=a(261),y=a(94),k=a(262),O=a(251),j=a(252),w=a(253),x=a(254),P=a(2),D=a(42),S={data:JSON.parse(localStorage.getItem("likedPosts")||"[]")||[]},C=function(e){var t=e.getState;return function(e){return function(a){var n=e(a);return(T.match(a)||F.match(a))&&localStorage.setItem("likedPosts",JSON.stringify(Object(P.a)(t().likedPosts.data))),n}}},I=Object(D.c)({name:"likedPosts",initialState:S,reducers:{addLikedPost:function(e,t){e.data=function(e,t){return e.data.some((function(e){return e.url===t.url}))?Object(P.a)(e.data):[].concat(Object(P.a)(e.data),[t])}(e,t.payload)},removeLikedPost:function(e,t){e.data=function(e,t){return e.data.filter((function(e){return e.url!==t.url}))}(e,t.payload)}}}),L=I.actions,T=L.addLikedPost,F=L.removeLikedPost,A=function(e){return e.likedPosts.data};var R=I.reducer;function W(e){let{image:t}=e;const a=p(),i=g(A),[l,c]=Object(n.useState)(!1),[o,s]=Object(n.useState)(!1),[u,d]=Object(n.useState)(!1),[m,P]=Object(n.useState)(""),[D,S]=Object(n.useState)("");Object(n.useEffect)(()=>{const e=new Date(t.date);S("".concat(e.toLocaleString("default",{month:"short"})," \n      ").concat(e.getUTCDate(),",\n      ").concat(e.getUTCFullYear()))},[t.date]),Object(n.useEffect)(()=>{s(!!i.some(e=>e.url===t.url))},[i]);const C=Object(n.useCallback)(()=>d(e=>!e),[]),I=Object(n.useCallback)(()=>c(e=>!e),[]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{sectioned:!0},r.a.createElement("img",{alt:"APOD image of "+t.date,width:"100%",height:"100%",style:{objectFit:"cover",objectPosition:"center"},src:t.url}),r.a.createElement("div",{style:{padding:"1rem 0",display:"flex",flexDirection:"row",justifyContent:"space-between"}},r.a.createElement("div",null,r.a.createElement(b.a,null,t.title),r.a.createElement("p",null,D)),r.a.createElement(E.a,{segmented:!0},r.a.createElement(v.a,{onClick:()=>{P("URL Copied to Clipboard"),d(!0),navigator.clipboard.writeText(t.url)},accessibilityLabel:"Copy url to clipboard",icon:O.a}),r.a.createElement(v.a,{onClick:function(){o?(P("Removed from Favourites"),a(F(t))):(P("Added to Favourites"),a(T(t))),d(!0)},accessibilityLabel:o?"Unlike post":"Like post",pressed:o,icon:j.a}))),r.a.createElement(h.a,{open:l,id:"collapsible-description",transition:{duration:"500ms",timingFunction:"ease-in-out"},expandOnPrint:!0},r.a.createElement(y.a,null,r.a.createElement("p",null,t.description))),r.a.createElement(v.a,{onClick:I,accessibilityLabel:l?"Collapse description":"Expand description",ariaExpanded:l,ariaControls:"collapsible-description",icon:l?w.a:x.a,plain:!0,fullWidth:!0})),u?r.a.createElement(k.a,{content:m,onDismiss:C}):null)}var _=a(93),J=a.n(_),N=a(124),U=a(125),Y=a.n(U);function z(e){var t=new Date;return t.setDate(t.getDate()-15*e-15+1),t.toISOString().split("T")[0]}function B(e){var t=new Date;return t.setDate(t.getDate()-15*e),t.toISOString().split("T")[0]}function Z(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return Y.a.get("https://api.nasa.gov/planetary/apod",{params:{api_key:"2EYIAQOZDLdoTYuqe2aEmBb6OVZ5Pp2IZKvdbPeS",thumbs:!0,start_date:z(e),end_date:B(e)}})}var q=Object(D.b)("images/fetchImages",function(){var e=Object(N.a)(J.a.mark((function e(t){var a;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z(t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),H=Object(D.c)({name:"images",initialState:{data:{activePage:0,pagesData:[]},status:"idle"},reducers:{addPageData:function(e,t){e.data.pagesData=function(e,t){return e.data.pagesData?e.data.pagesData.some((function(e){return e.number===t.number}))?Object(P.a)(e.data.pagesData):[].concat(Object(P.a)(e.data.pagesData),[t]):[t]}(e,t.payload)},setActivePage:function(e,t){e.data.activePage=t.payload}},extraReducers:function(e){e.addCase(q.pending,(function(e){e.status="loading"})).addCase(q.rejected,(function(e){e.status="failed"})).addCase(q.fulfilled,(function(e){e.status="idle"}))}}),K=H.actions,M=K.addPageData,Q=K.setActivePage,V=function(e){return e.images.data.pagesData},$=function(e){return e.images.data.activePage},G=function(e){return e.images.status};var X=H.reducer,ee=a(126),te=a.n(ee),ae=a(127),ne=a.n(ae);function re(e){var t,a;let{selectedTabId:i}=e;const l=p(),c=g(V),o=g($),s=g($),m=g(A),f=g(G);return Object(n.useEffect)(()=>{c.some(e=>e.number===o)||"failed"===f||l(q(o)).unwrap().then(e=>{l(M({number:o,images:e.data.map(e=>({title:e.title,date:e.date,description:e.explanation,url:"video"===e.media_type?e.thumbnail_url:e.url}))}))}).catch(e=>{console.log("Error occurred",e)})}),r.a.createElement(r.a.Fragment,null,"explore"===i?"failed"===f?r.a.createElement("div",{"data-testid":"error-state-page"},r.a.createElement(u.a,{heading:"Something got lost in space...",image:ne.a},r.a.createElement("p",null,"Please try again later."))):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{display:"flex",flexDirection:"column-reverse"}},null===(t=c.find(e=>e.number===o))||void 0===t||null===(a=t.images)||void 0===a?void 0:a.map(e=>r.a.createElement(W,{image:e,key:e.url}))),r.a.createElement("div",{style:{display:"flex",justifyContent:"center",padding:"2rem"}},r.a.createElement(d.a,{hasPrevious:s>0,onPrevious:()=>{l(Q(s-1)),window.scrollTo({top:0,behavior:"smooth"})},hasNext:!0,onNext:()=>{l(Q(s+1)),window.scrollTo({top:0,behavior:"smooth"})}}))):0===m.length?r.a.createElement(u.a,{heading:"There's nothing to see here",image:te.a},r.a.createElement("p",null,"Head over to the ",r.a.createElement("em",null,"Explore Recent")," tab to start your collection!")):r.a.createElement("div",{style:{display:"flex",flexDirection:"column-reverse"}},m.map(e=>r.a.createElement(W,{image:e,key:e.url}))))}var ie=a(264),le=a(265),ce=a(132),oe=a(95);function se(){return r.a.createElement(ie.a,{title:"",narrowWidth:!0},r.a.createElement("hr",null),r.a.createElement(s.a,{tabs:me,selected:0,fitted:!0}),Array(15).fill(0).map((function(e,t){return r.a.createElement(f.a,{key:t},r.a.createElement(f.a.Section,null,r.a.createElement(le.a,{size:"large"}),r.a.createElement(y.a,null,r.a.createElement("br",null),r.a.createElement(ce.a,{size:"small"}),r.a.createElement(oe.a,{lines:2}))))})))}var ue=a(128),de=a.n(ue);const me=[{id:"explore",content:"Explore Recent",accessibilityLabel:"Explore Page",panelID:"explore-page-content"},{id:"liked",content:"Your Favourites",panelID:"liked-page-content"}];var pe=function(){const e=g(G),[t,a]=Object(n.useState)(0),i=Object(n.useCallback)(e=>a(e),[]);return"loading"===e?r.a.createElement(se,null):r.a.createElement(c.a,{title:"",narrowWidth:!0},r.a.createElement("img",{src:de.a,alt:"spacestagram logo",style:{width:"200px",padding:"1rem  0",cursor:"pointer"},onClick:()=>{window.location.reload()},"data-testid":"logo"}),r.a.createElement("hr",null),r.a.createElement(o.a,null,r.a.createElement(s.a,{tabs:me,selected:t,onSelect:i,fitted:!0}),r.a.createElement(re,{selectedTabId:me[t].id})))},ge=Object(D.a)({reducer:{images:X,likedPosts:R},middleware:function(e){return e({serializableCheck:!1}).concat(C)}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var fe=a(258),be=a(129);a(245);l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(m.a,{store:ge},r.a.createElement(fe.a,{i18n:be},r.a.createElement(pe,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[134,1,2]]]);
//# sourceMappingURL=main.7cbcdcd4.chunk.js.map