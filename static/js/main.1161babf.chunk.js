(this.webpackJsonpspacestagram=this.webpackJsonpspacestagram||[]).push([[0],{131:function(e,t,a){e.exports=a(244)},136:function(e,t,a){},137:function(e,t,a){},244:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(28),c=a.n(i),o=(a(136),a(2)),l=a(254),s=a(253),u=a(256),d=(a(137),a(260)),m=a(127),p=a(56),f=function(){return Object(p.b)()},g=p.c,b=a(257),E=a(128),v=a(24),h=a(16),O=a(258),j=a(94),y=a(259),k=a(248),w=a(249),P=a(250),x=a(251),D=a(3),S=a(42),C={data:JSON.parse(localStorage.getItem("likedPosts")||"[]")||[]},I=function(e){var t=e.getState;return function(e){return function(a){var n=e(a);return(F.match(a)||A.match(a))&&localStorage.setItem("likedPosts",JSON.stringify(Object(D.a)(t().likedPosts.data))),n}}},L=Object(S.c)({name:"likedPosts",initialState:C,reducers:{addLikedPost:function(e,t){e.data=function(e,t){return e.data.some((function(e){return e.url===t.url}))?Object(D.a)(e.data):[].concat(Object(D.a)(e.data),[t])}(e,t.payload)},removeLikedPost:function(e,t){e.data=function(e,t){return e.data.filter((function(e){return e.url!==t.url}))}(e,t.payload)}}}),T=L.actions,F=T.addLikedPost,A=T.removeLikedPost,R=function(e){return e.likedPosts.data};var W=L.reducer;function _(e){var t=e.image,a=f(),i=g(R),c=Object(n.useState)(!1),l=Object(o.a)(c,2),s=l[0],u=l[1],d=Object(n.useState)(!1),m=Object(o.a)(d,2),p=m[0],D=m[1],S=Object(n.useState)(!1),C=Object(o.a)(S,2),I=C[0],L=C[1],T=Object(n.useState)(""),W=Object(o.a)(T,2),_=W[0],J=W[1],N=Object(n.useState)(""),z=Object(o.a)(N,2),B=z[0],Y=z[1];Object(n.useEffect)((function(){var e=new Date(t.date);Y(e.toDateString().split(" ").slice(1).join(" "))}),[t.date]),Object(n.useEffect)((function(){D(!!i.some((function(e){return e.url===t.url})))}),[i]);var Z=Object(n.useCallback)((function(){return L((function(e){return!e}))}),[]),U=Object(n.useCallback)((function(){return u((function(e){return!e}))}),[]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a,{sectioned:!0},r.a.createElement("img",{alt:"APOD image of "+t.date,width:"100%",height:"100%",style:{objectFit:"cover",objectPosition:"center"},src:t.url}),r.a.createElement("div",{style:{padding:"1rem 0",display:"flex",flexDirection:"row",justifyContent:"space-between"}},r.a.createElement("div",null,r.a.createElement(E.a,null,t.title),r.a.createElement("p",null,B)),r.a.createElement(v.a,{segmented:!0},r.a.createElement(h.a,{onClick:function(){J("URL Copied to Clipboard"),L(!0),navigator.clipboard.writeText(t.url)},accessibilityLabel:"Copy url to clipboard",icon:k.a}),r.a.createElement(h.a,{onClick:function(){p?(J("Removed from Favourites"),a(A(t))):(J("Added to Favourites"),a(F(t))),L(!0)},accessibilityLabel:p?"Unlike post":"Like post",pressed:p,icon:w.a}))),r.a.createElement(O.a,{open:s,id:"collapsible-description",transition:{duration:"500ms",timingFunction:"ease-in-out"},expandOnPrint:!0},r.a.createElement(j.a,null,r.a.createElement("p",null,t.description))),r.a.createElement(h.a,{onClick:U,accessibilityLabel:s?"Collapse description":"Expand description",ariaExpanded:s,ariaControls:"collapsible-description",icon:s?P.a:x.a,plain:!0,fullWidth:!0})),I?r.a.createElement(y.a,{content:_,onDismiss:Z}):null)}var J=a(93),N=a.n(J),z=a(124),B=a(125),Y=a.n(B);function Z(e){var t=new Date;return t.setDate(t.getDate()-15*e-15+1),t.toISOString().split("T")[0]}function U(e){var t=new Date;return t.setDate(t.getDate()-15*e),t.toISOString().split("T")[0]}function q(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return Y.a.get("https://api.nasa.gov/planetary/apod",{params:{api_key:"2EYIAQOZDLdoTYuqe2aEmBb6OVZ5Pp2IZKvdbPeS",thumbs:!0,start_date:Z(e),end_date:U(e)}})}var H=Object(S.b)("images/fetchImages",function(){var e=Object(z.a)(N.a.mark((function e(t){var a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q(t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),K=Object(S.c)({name:"images",initialState:{data:{activePage:0,pagesData:[]},status:"idle"},reducers:{addPageData:function(e,t){e.data.pagesData=function(e,t){return e.data.pagesData?e.data.pagesData.some((function(e){return e.number===t.number}))?Object(D.a)(e.data.pagesData):[].concat(Object(D.a)(e.data.pagesData),[t]):[t]}(e,t.payload)},setActivePage:function(e,t){e.data.activePage=t.payload}},extraReducers:function(e){e.addCase(H.pending,(function(e){e.status="loading"})).addCase(H.rejected,(function(e){e.status="failed"})).addCase(H.fulfilled,(function(e){e.status="idle"}))}}),M=K.actions,Q=M.addPageData,V=M.setActivePage,$=function(e){return e.images.data.pagesData},G=function(e){return e.images.data.activePage},X=function(e){return e.images.status};var ee=K.reducer;function te(e){var t,a,i=e.selectedTabId,c=f(),o=g($),l=g(G),s=g(G),u=g(R),p=g(X);return Object(n.useEffect)((function(){o.some((function(e){return e.number===l}))||"failed"===p||c(H(l)).unwrap().then((function(e){c(Q({number:l,images:e.data.map((function(e){return{title:e.title,date:e.date,description:e.explanation,url:"video"===e.media_type?e.thumbnail_url:e.url}}))}))})).catch((function(e){console.log("Error occurred",e)}))})),r.a.createElement(r.a.Fragment,null,"explore"===i?"failed"===p?r.a.createElement("div",{"data-testid":"error-state-page"},r.a.createElement(d.a,{heading:"Something got lost in space...",image:"./failed.png"},r.a.createElement("p",null,"Please try again later."))):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{display:"flex",flexDirection:"column-reverse"}},null===(t=o.find((function(e){return e.number===l})))||void 0===t||null===(a=t.images)||void 0===a?void 0:a.map((function(e){return r.a.createElement(_,{image:e,key:e.url})}))),r.a.createElement("div",{style:{display:"flex",justifyContent:"center",padding:"2rem"}},r.a.createElement(m.a,{hasPrevious:s>0,onPrevious:function(){c(V(s-1)),window.scrollTo({top:0,behavior:"smooth"})},hasNext:!0,onNext:function(){c(V(s+1)),window.scrollTo({top:0,behavior:"smooth"})}}))):0===u.length?r.a.createElement(d.a,{heading:"There's nothing to see here",image:"./empty.png"},r.a.createElement("p",null,"Head over to the ",r.a.createElement("em",null,"Explore Recent")," tab to start your collection!")):r.a.createElement("div",{style:{display:"flex",flexDirection:"column-reverse"}},u.map((function(e){return r.a.createElement(_,{image:e,key:e.url})}))))}var ae=a(261),ne=a(262),re=a(129),ie=a(95);function ce(){return r.a.createElement(ae.a,{title:"",narrowWidth:!0},r.a.createElement("hr",null),r.a.createElement(u.a,{tabs:oe,selected:0,fitted:!0}),Array(15).fill(0).map((function(e,t){return r.a.createElement(b.a,{key:t},r.a.createElement(b.a.Section,null,r.a.createElement(ne.a,{size:"large"}),r.a.createElement(j.a,null,r.a.createElement("br",null),r.a.createElement(re.a,{size:"small"}),r.a.createElement(ie.a,{lines:2}))))})))}var oe=[{id:"explore",content:"Explore Recent",accessibilityLabel:"Explore Page",panelID:"explore-page-content"},{id:"liked",content:"Your Favourites",panelID:"liked-page-content"}];var le=function(){var e=g(X),t=Object(n.useState)(0),a=Object(o.a)(t,2),i=a[0],c=a[1],d=Object(n.useCallback)((function(e){return c(e)}),[]);return"loading"===e?r.a.createElement(ce,null):r.a.createElement(l.a,{title:"",narrowWidth:!0},r.a.createElement("img",{src:"./logo.svg",alt:"spacestagram logo",style:{width:"200px",padding:"1rem  0",cursor:"pointer"},onClick:function(){window.location.reload()},"data-testid":"logo"}),r.a.createElement("hr",null),r.a.createElement(s.a,null,r.a.createElement(u.a,{tabs:oe,selected:i,onSelect:d,fitted:!0}),r.a.createElement(te,{selectedTabId:oe[i].id})))},se=Object(S.a)({reducer:{images:ee,likedPosts:W},middleware:function(e){return e({serializableCheck:!1}).concat(I)}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ue=a(255),de=a(126);a(242);c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(p.a,{store:se},r.a.createElement(ue.a,{i18n:de},r.a.createElement(le,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[131,1,2]]]);
//# sourceMappingURL=main.1161babf.chunk.js.map